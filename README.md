# JLS

## Описание

Утилита, выполняющая функционал `ls -l`

## Зависимости для запуска

- **libc** >= 6

## Зависимости для сборки

- **cmake** >= 3.15

- **gcc** >= 11.4.0

## Сборка

Для сборки выполните:

```bash
mkdir build && \
cd    build && \
cmake ..    && \
make
```

## Тестирование

Для созадния тестовой среды выполните:

```bash
make testEnv
```

Для запуска тестирования утилиты выполните:

```bash
make test
```

## Установка

Для установки утилиты выполните:

```bash
sudo make install
```

Утилита будет установлена в `${CMAKE_PREFIX}/bin`

## Использование

- Утилита `jls` поддерживает от 0 до 1 аргумента.

- Если аргументов не указано, утилита выведет подробную информацию о содержимом текущей директории

- Если аргумент указывает на файл, утилита выведет подробную информацию о нем

- Если аргумент указывает на директорию., утилита выведет подробную информацию о её содержимом

- Код возврата при успешном выполнении: `0`

- Код возврата при возникновении ошибки: `0`

Пример использования:

```bash
jls /
```

## Удаление

Для удаления утилиты выполните:

```bash
sudo make uninstall
```

## Bugs

## TODO

- Добавить в **CMakeLists.txt** вывод строк с `sudo apt install doxygen` и `sudo apt install valgrind` в соотвествующих местах

- Создать скрипт для генерации тестовой среды в директории **tests**. Тестовая среда должна состоять из нескольких директорий, в которых будет:
  
  - Большой список файлов;
  
  - Файлы с русскими символами;
  
  - Файлы с пробелами;
  
  - Пустые директории;
  
  - Разные типы файлов (`fileInfoTypesEnum`);
  
  - Файлы с разными uid (например, 1000 и 432423)
  
  - Файлы с разными uid (например, 1000 и 432423)
  
  - Файлы с временем изменения > 6 месяцев от текущего времени
  
  - Файлы с временем изменения в будущем от текущего времени
  
  - Симлинки, цель которых содержит пробелы
  
  Этот скрипт должен находиться в директории **scripts** и вызываться перед выполнением правила `make tests`

- Изменить тесты так, чтобы строка для вызова `jls` создавалась на основании наличия в системе valgrind

- Тесты должны проводиться с каждой директорией из `tests`

- Вывод `jls` при каждом тесте должен писаться в соответствующий файл формата `TEST_NAME.jls`. Вместе с этим, при каждом тесте `jls` должен происходить вызов `ls -l` с тем же аргументом. Вывод должен писаться в `TEST_NAME.ls`. В конце теста/ов, при помощи `diff` необходимо выполнить сравнение выходных файлов

- Добавить вывод `total` при использовании `jls` на директорию.
  Его рассчет нужно производить до вывода информации о содержимом директории. Возможно, для этого нужно будет переписать функции модуля `jls`, выполняющие проход по файлам. Например, master-функцию, за один проход по файлам получающую всю необходимую информацию.
  Для рассчета `total` нужно просуммировать `fileInfoGetBlocks()` всех файлов и разделить результат пополам (`fileInfoGetBlocks()` возвращает количество 1024-байтовых блоков, а `total` выводит количество 512-байтовых блоков) 

- Добавить вывод '', если файл содержит пробелы. Сложность в том, что наличие кавычек обязывает добавлять пробел пробел перед именем и не ставить этот пробел у файлов с кавычками. Скорее всего, для этого придется доработать `jlsGetFilesList()`, `jlsCalculateAlignment()` и `jlsPrintFileInfo()`. Еще один важный момент: кавычки не должны участвовать в сортировке (`jlsSortFilesList()`)

- Раскрасить выводимое имя файла и цель симлинка. Лучше всего, тянуть цвета из системы
