<img title="" src="resources/icon.png" alt="icon.png" data-align="center" width="500">

## Описание

Утилита, выполняющая функционал `ls -l`

## Зависимости для запуска

- **libc** >= 6

## Зависимости для сборки

- **cmake** >= 3.15

- **gcc** >= 11.4.0

## Сборка

Для сборки выполните:

```bash
mkdir build && \
cd    build && \
cmake ..    && \
make
```

## Документация

Для генерации документации по коду выполните:

```bash
make doc
```

Откройте **documentation.html** в любом браузере

## Тестирование

Для создния тестовой среды выполните:

```bash
sudo ./scripts/makeTestEnv
```

Наличие **root** прав необходимо для создания некоторых тестовых сценариев.

Для запуска тестирования утилиты выполните:

```bash
make tests
```

## Установка

Для установки утилиты выполните:

```bash
sudo make install
```

Утилита будет установлена в `${CMAKE_PREFIX}/bin`

## Использование

- Утилита `jls` поддерживает от 0 до 1 аргумента.

- Если аргументов не указано, утилита выведет подробную информацию о содержимом текущей директории

- Если аргумент указывает на файл, утилита выведет подробную информацию о нем

- Если аргумент указывает на директорию., утилита выведет подробную информацию о её содержимом

- Код возврата при успешном выполнении: `0`

- Код возврата при возникновении ошибки: `1`

Пример использования:

```bash
jls /
```

## Удаление

Для удаления утилиты выполните:

```bash
sudo make uninstall
```

## Bugs

## TODO

- Разобраться с выводом некорректных значений размера у Block и Char в тесте DifferentTypes

- Исправить ошибку, при которой путь к одиночному файлу не выводится. Эта ошибка возникает, если целью `jls` является файл с полным путем до нему

- Добавить вывод `total` при использовании `jls` на директорию.
  Его рассчет нужно производить до вывода информации о содержимом директории. Возможно, для этого нужно будет переписать функции модуля `jls`, выполняющие проход по файлам. Например, master-функцию, за один проход по файлам получающую всю необходимую информацию.
  Для рассчета `total` нужно просуммировать `fileInfoGetBlocks()` всех файлов и разделить результат пополам (`fileInfoGetBlocks()` возвращает количество 1024-байтовых блоков, а `total` выводит количество 512-байтовых блоков). Не забыть убрать блок TODO из makeTests после добавления вывода `total`.

- Добавить вывод одинарных кавычек, если имя файла имеет непечатаемые в текущей локали символы. Сложность в том, что наличие кавычек обязывает добавлять пробел пробел перед именем и не ставить этот пробел у файлов с кавычками. Скорее всего, для этого придется доработать `jlsGetFilesList()`, `jlsCalculateAlignment()` и `jlsPrintFileInfo()`. Еще один важный момент: кавычки не должны участвовать в сортировке (`jlsSortFilesList()`)

- Добавить тест с несколькими аргументами. Для этого нужно будет изменить логику работы ПО так, чтобы вместо filePtr формировался список файлов, которые уже и будут передаваться в `jls()`. Возможно, стоит сделать функцию `jlsList()`, которая будет принимать на вход не указатель на файл, а `jlsFilesListStruct`

- Раскрасить выводимое имя файла и цель симлинка. Лучше всего, тянуть цвета из системы
