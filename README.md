<img title="" src="resources/icon.png" alt="icon.png" data-align="center" width="500">

## Описание

Утилита, выполняющая функционал `ls -l`

## Зависимости для запуска

- **libc** >= 6

## Зависимости для сборки

- **cmake** >= 3.15

- **gcc** >= 11.4.0

## Дополнительные зависимости

- **doxygen** >= 1.9.1

- **valgrind** >= 3.18.1

- **meld** >= 3.20.4

## Сборка

Для сборки выполните:

```bash
mkdir build && \
cd    build && \
cmake ..    && \
make
```

## Установка

Для установки утилиты выполните:

```bash
sudo make install
```

Утилита будет установлена в `${CMAKE_PREFIX}/bin`

## Использование

- Список поддерживаемых опций:
  
  - `-s | --safe-mode` - включает безопасный режим вывода имен файлов.
    Подробнее: `jlsMakeStringSafe()`
  
  - `-t | --test-mode` - включает тестовый режим работы.
    Тестовый режим работы нужен для полного соответствия вывода `jls` и `ls`

- Код возврата при успешном выполнении: `0`

- Код возврата при возникновении ошибки: `1`

Пример использования:

```bash
# jls [OPTIONS] FILES_LIST
jls /
jls --safe-mode /usr/bin
jls -t /compare/with/ls/test
jls /usr/bin /home nonexistent.file /usr/bin/jls
```

## Удаление

Для удаления утилиты выполните:

```bash
sudo make uninstall
```

## Документация

Для генерации документации по коду выполните:

```bash
make doc
```

Откройте **documentation.html** в любом браузере

> Необходимо наличие пакета **doxygen**

## Тестирование

Для создния тестовой среды выполните:

```bash
sudo ../scripts/makeTestEnv
```

> Наличие **root** прав необходимо для создания некоторых тестовых сценариев.

Для запуска тестирования утилиты выполните:

```bash
make tests
```

> Для тестов на утечки памяти необходимо наличие пакета **valgrind**

Также можно вызвать скрипт тестирования самостоятельно:

```bash
./scripts/makeTests ./jls
```

Если необходимо выполнить только определенный/е тесты, их названия можно передать в качестве аргументов:

```bash
./scripts/makeTests ./jls UsrBinTerminalCompare
```

> Если в системе установлен пакет **meld** и один или несколько **Compare** тестов провалились, откроется окно **meld** с выводом `ls` и `jls`

## BUGS

- Вывод `ls -l` и `jls` не совпадает символ в символ. Разница в выводе `\033[K`. 

## TODO

- Сделать вывод \033[K идентичным `ls`.

- Дописать в `README.md` новые флаги запуска

- Исправить ошибку, при которой симлинки без целей не окрашиваются

- Исправить проблему в расчете отступов. Она проявляет себя только в режиме одиночного файла

- Создать тесты с разными разрешениями файлов (для проверки color)
